<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | VegTrip</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../css/style-admin.css">
    <link rel="stylesheet" href="../css/chart.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <!-- Menu Lateral -->
    <nav class="menu-lateral">

        <div class="btn-expandir">
            <i class="bi bi-list"></i>
        </div><!--btn-expandir-->

        <ul>
            <li class="item-menu">
                <a href="#">
                    <span class="icon"><i class="bi bi-bar-chart-fill"></i>
                    </span>
                    <span class="txt-link">Dashboard</span>
                </a>
            </li>

            <li class="item-menu">
                <a href="#">
                    <span class="icon"><i class="bi bi-people-fill"></i></span>
                    <span class="txt-link">Usuários</span>
                </a>
            </li>

            <li class="item-menu">
                <a href="#">
                    <span class="icon"><i class="bi bi-file-earmark-post"></i></span>
                    <span class="txt-link">
                        <p>Receitas</p>
                    </span>
                </a>
            </li>

            <li class="item-menu">
                <a href="#">
                    <span class="icon"><i class="bi bi-clipboard-data"></i></span>
                    <span class="txt-link">Análise de Receitas</span>
                </a>
            </li>

            <li class="item-menu">
                <a href="#">
                    <span class="icon"><i class="bi bi-box-arrow-right"></i></span>
                    <span class="txt-link">Sair</span>
                </a>
            </li>
        </ul>

    </nav> <!--Menu Lateral-->

    <!-- HEADER -->
    <header class="header">
        <div class="container">
            <div class="content">
                <div class="boas-vinda">
                    <h1>Olá, admin</h1>
                    <span class="icon"><i class="bi bi-bell-fill"></i></span>
                </div>

                <div class="subtitulo">
                    <h2>Acompanhe o desemenho do seu site!</h2>
                </div>

            </div>
        </div>
    </header>

    <section class="sessao1">
        <div class="container">
            <div class="content">

                <div class="graficos">

                    <div class="metrica chart">
                        <span> <i class="bi bi-person-fill"></i></span>

                        <span id="qtd_user">
                            101
                        </span>

                        <span class="total_usuarios">
                            Total usuários
                        </span>
                    </div>

                    <div class="grafico-linha chart">
                        <span class="total_usuarios">
                            Geral
                        </span>
                        <canvas id="grafico_desempenho_linha"></canvas>
                    </div>

                </div><!-- graficos -->
            </div><!-- content -->
        </div><!-- container -->
    </section>

    <section class="sessao2">
        <div class="container">
            <div class="content">

                <div class="graficos">

                    <div class="grafico-pizza chart">
                        <span class="total_usuarios">
                            Gênero
                        </span>
                        <canvas id="desempenho_sexo_pie"></canvas>
                    </div><!--grafico-pizza-->

                    <div class="grafico-barras chart">
                        <span class="total_usuarios">
                            Idade
                        </span>
                        <canvas id="desempenho_idade_bar"></canvas>
                    </div><!--grafico-barras-->

                </div><!-- graficos -->

            </div><!-- content -->
        </div><!-- container -->
    </section>


    <script src="../js/chart.js"></script>
</body>

<script>

    const grafico_desempenho_linha = new Chart(document.getElementById('grafico_desempenho_linha'), desempenho_geral);
    const grafico_desempenho_pizza = new Chart(document.getElementById('desempenho_sexo_pie'), desempenho_sexo);
    const grafico_desempenho_barra = new Chart(document.getElementById('desempenho_idade_bar'), dsp_idade);



        fetch("/usuarios/totalUsuarios").then(function (resposta) {
            if (resposta.ok) {
                if (resposta.status == 204) {
                    console.log('Nenhum resultado encontrado.')
                }

                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));
                        qtd_user.innerHTML = resposta[0].totalUsuarios;
                        console.log(resposta[0].totalUsuarios)
                })
                
            } else {
                throw ('Houve um erro na API!');
            }
        }).catch(function (resposta) {
            console.error(resposta);
        });


</script>

</html>